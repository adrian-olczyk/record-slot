<div class="container record-ctrl">
  <div class="row">
    <div class="col-lg-12">
      <spinner ng-show="recordCtrl.loading"></spinner>

      <form name="form"
            class="record-form"
            ng-hide="recordCtrl.loading"
            ng-submit="form.$valid && recordCtrl.save(recordCtrl.record)" novalidate>
        <div class="form-group row">
          <label for="name-input" class="col-xs-2 col-form-label">Name</label>
          <div class="col-md-10">
            <input name="name" class="form-control" type="text" ng-model="recordCtrl.record.name" id="name-input" required>
            <p class="text-danger"
               ng-hide="form.name.$untouched || form.name.$valid"
               ng-show="form.$submitted && form.name.$invalid">
              This field is required</p>
          </div>
        </div>
        <div class="form-group row">
          <label for="description-input" class="col-xs-2 col-form-label">Description</label>
          <div class="col-md-10">
            <textarea class="form-control" id="description-input" rows="10" ng-model="recordCtrl.record.description"></textarea>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-xs-2 col-form-label">Slots</label>
          <div class="col-md-10">
            <div class="row slot" ng-repeat="slot in recordCtrl.record.slots">
              <div class="col-md-5">
                <select name="" class="form-control" ng-model="slot.provider" required
                        ng-options="provider.id as provider.name for provider in recordCtrl.availableProviders"></select>
              </div>
              <div class="col-md-5">
                <input class="form-control" type="text" ng-model="slot.options">
              </div>
              <div class="col-md-2 text-right">
                <a class="btn btn-link" ng-click="recordCtrl.deleteSlot(slot)">Remove</a>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <a class="btn btn-default" ng-click="recordCtrl.addSlot(slot)">Add slot</a>
              </div>
            </div>

          </div>
        </div>
        <div class="form-group row">
          <div class="col-md-10 col-md-push-2">
            <button class="btn btn-primary" type="submit">Save</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
